<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"/> 
		<meta name="apple-mobile-web-app-capable" content="yes" /> 
		<title>dstoreMemory Unit App Test</title>
		<link rel="stylesheet" href="../../../../delite/themes/defaultapp.css">


		<!-- for dojo -->
		<!--
		<link rel="stylesheet" href="../deliteApp/app.css">
		<script type="text/javascript" data-dojo-config="async: true" src="../../../dojo/dojo.js"></script>
		-->

		<!-- for requireJS -->
		<!--  -->
		<script src="../../../../requirejs/require.js"></script>
			<script>
				require.config({
					/* either us baseUrl and paths or packages
						baseUrl: "../../../../",
						paths: {
		        			"App1": "dapp/tests/unit/dstoreMemory/App",
							"config": "dapp/tests/unit/dstoreMemory/config"
						},
					*/
						packages: [
							{ name: "dapp", location : "../../../../dapp"},
							{ name: "dcl", location : "../../../../dcl"},
							{ name: "dojo", location : "../../../../dojo"},
							{ name: "dpointer", location : "../../../../dpointer"},
							{ name: "dstore", location : "../../../../dstore"},
							{ name: "decor", location : "../../../../decor"},
							{ name: "delite", location : "../../../../delite"},
							{ name: "deliteful", location : "../../../../deliteful"},
							{ name: "lie", location : "../../../../lie"},
							{ name: "jquery", location : "../../../../jquery"},
							{ name: "requirejs", location : "../../../../requirejs"},
							{ name: "requirejs-text", location : "../../../../requirejs-text"},
							{ name: "requirejs-dplugins", location : "../../../../requirejs-dplugins"},
							{ name: "requirejs-domready", location : "../../../../requirejs-domready"}
						],

				    waitSeconds: 15
				  });
	        </script>
		<!-- -->
		<script>
			//require(["./App"]);
			require(["dapp/Application", "requirejs-text/text!./app.json"],
				function (Application, config) {
					window.dstoreMemoryApp = {};
					window.dstoreMemoryApp.list1Data = {
						identifier: "id",
						'items': []
					};
					for (var i = 1; i < 6; i++) {
						window.dstoreMemoryApp.list1Data.items.push({
							label: "Selection " + i,
							id: i
						});
					}


					window.dstoreMemoryApp.list2Data = {
						identifier: "id",
						'items': []
					};
					for (i = 6; i < 11; i++) {
						window.dstoreMemoryApp.list2Data.items.push({
							label: "Selection " + i,
							id: i
						});
					}

					var jsonData = config;
					jsonData = jsonData.replace(/\/\*.*?\*\//g, "");
					jsonData = jsonData.replace(/\/\/.*/g, "");
					var json = JSON.parse(jsonData);
					json.loaderConfig.paths.dstoreMemoryApp = "../dstoreMemory"
					//new Application(JSON.parse(jsonData));
					new Application(json).then(function (app) {
						console.log("promise resolved for new App [" + app.id + "] it should be started and default views shown");
					});
				});
        </script>
	</head>
	<body style="width:100%; height: 100%">
	<d-view-stack id='dstoreMemoryAppdviewStack' style='width: 100%; height: 400px;'>
	</d-view-stack>
	</body>
</html>
